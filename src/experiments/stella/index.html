<!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
  height: 100%
}

footer {
  position: absolute;
  bottom: 0;
  width: 100%;
  text-align: center;
  height: 5%;
}

img {
  margin: auto;
  width: 10%;
}

input {
  width: 50%;
}

#map {
  height: 400px;
  width: 100%;
}


</style>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="Stella, a sweet, language aware AI.">
    <meta name="author" content="Dante Tam">
    <link rel="icon" href="../favicon.ico">

    <title>Stella</title>

    <!-- Bootstrap core CSS -->
    <link href="../../../dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="../../../assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="index.css" rel="stylesheet">
		<link href="default.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="../../../assets/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

		<!--<script src="d3.v3.min.js"></script>-->

    <script src="https://use.typekit.net/itd8uey.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>

		<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
		<!--
    <script src="https://d3js.org/d3-random.v1.min.js"></script>
    <script src="https://d3js.org/d3-timer.v1.min.js"></script>
    <script src="https://d3js.org/d3-array.v1.min.js"></script>
    <script src="https://d3js.org/d3-collection.v1.min.js"></script>
    <script src="https://d3js.org/d3-queue.v2.min.js"></script>
    -->

    <script src="d3.hexbin.min.js"></script>
    <script type="text/javascript" src="data.js"></script>
    <script src="./xml2json.js"></script>

  </head>

  <body>
    <nav class="navbar navbar-intro navbar-fixed-top navie" id="mainNavbar" style="opacity: 0;">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
          </button>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-intro">
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">@dantetam<span class="caret"></span></a>
							<ul class="dropdown-menu">
								<li class="dropdown-header">Professional</li>
								<li><a href="https://github.com/dantetam" target="_blank">GitHub</a></li>
								<li><a href="mailto:dante.tam1@gmail.com">E-mail</a></li>
								<li role="separator" class="divider"></li>
								<li class="dropdown-header">Personal</li>
								<li><a href="#"></a></li>
								<li><a href="#"></a></li>
							</ul>
						</li>
            <li><a href="../../../index.html">Home</a></li>
            <li><a href="../../projects.html">Personal Projects</a></li>
						<li><a href="../../writings.html">Writings</a></li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Technical Drawings<span class="caret"></span></a>
							<ul class="dropdown-menu">
								<li class="dropdown-header">Design</li>
								<li><a href="../../opstrykon_gdd.pdf">Game Design Document</a></li>
								<li><a href="../../drawings.html">Architecture</a></li>
								<li role="separator" class="divider"></li>
								<li class="dropdown-header">Nav header</li>
								<li><a href="#"></a></li>
								<li><a href="#"></a></li>
							</ul>
						</li>
						<li><a href="../../courses.html">Courses</a></li>
						<li><a href="../../resume.pdf">Resume</a></li>
						<li class="dropdown active">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Experiments<span class="caret"></span></a>
							<ul class="dropdown-menu">
								<li class="dropdown-header">Design and Data</li>
								<li><a href="../../experiments/resume/index.html">Interactive Resume (d3.js)</a></li>
								<li><a href="../../experiments/testglwebsite/src/index.html">Graphics (WebGL)</a></li>
								<li class="active"><a href="../../experiments/datavisual/index.html">Data Visualization (d3.js)</a></li>
								<li role="separator" class="divider"></li>
								<li><a href="#"></a></li>
								<li><a href="#"></a></li>
							</ul>
						</li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">

      <div class="intro" id="stella-intro">
        <div id="stella-chat"><h3>Hi, I'm Stella!</h3></div>
        <img src="./images/blue_stella_hexagon.png" style="width: 256px; height: 256px;"></img>
        <!-- <img src="./images/stella_hexagon2.png" style="width: 512px; height: 512px;"></img> -->
        <br><br>
        <input type="text" id="user-input" value="">
      </div>

      <div
        class="fb-like"
        data-share="true"
        data-width="450"
        style="width: 10%; height: 10%; opacity: 0;"
        data-show-faces="true"
        >Loading FB integration...
      </div>

      <button id="authorize-button" class="btn btn-primary" style="opacity: 0;">Integrate Gmail</button>
      <button id="logout-button" class="btn" onclick="javascript:logOutGmail();" style="opacity: 0;">Log Out Gmail</button>

      <!--<div class="fb-login-button" data-max-rows="1" data-size="medium" data-show-faces="false" data-auto-logout-link="true"></div>-->
      <fb:login-button scope="public_profile,email,pages_messaging" onlogin="checkLoginState();" style="opacity: 0;">
      </fb:login-button>

      <button id="fb-logout-button" class="btn" onclick="javascript:logOutFacebook();" style="opacity: 0;">Log Out Facebook</button>

      <div id="map"></div>

      <table id="email-display" class="table table-striped table-inbox hidden" style="display: none;">
        <thead>
          <tr>
            <th>From</th>
            <th>Subject</th>
            <th>Labels</th>
            <th>Date/Time</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <!--
      <div class="fb-send-to-messenger"
        messenger_app_id="APP_ID"
        page_id="PAGE_ID"
        data-ref="PASS_THROUGH_PARAM"
        color="blue"
        size="standard">
      </div>
      -->

      <!--
      <div class="intro">

      </div>
      -->
      <div id="provideASearchEnginePlease">
        <script>
          (function() {
            var cx = '004355660903329151425:oiqte00maj4';
            var gcse = document.createElement('script');
            gcse.type = 'text/javascript';
            gcse.async = true;
            gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(gcse, s);
          })();
        </script>
      </div>

      <div id="searchResults">
        <gcse:searchbox gname="storesearch" newWindow="false" data-resultSetSize="50" resultSetSize="50"></gcse:searchbox>
        <gcse:searchresults gname="storesearch" newWindow="false"></gcse:searchresults>
      </div>

      <!--
      <div>
        <button class="testButton" onclick="lookGcseResults">Test GCSE Results</button>
      </div>
      -->

    </div><!-- /.container -->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="../../../dist/js/bootstrap.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../../assets/js/ie10-viewport-bug-workaround.js"></script>
    <script src="cookie.js"></script>

    <script src="./maps.js"></script>
    <script src="./searchweb.js"></script>

    <script src="//algorithmia.com/v1/clients/js/algorithmia-0.2.0.js" type="text/javascript"></script>

    <script src="./stemmer.js"></script>
    <script src="./parse.js"></script>
    <script src="./commands.js"></script>
    <script src="./gmail.js"></script>
    <script src="./google-calendar.js"></script>
    <script src="./fb.js"></script>
    <script src="./textrank.js"></script>
    <script src="./twitter.js"></script>
    <script src="./finance.js"></script>

    <script>

    d3.select("#searchResults").on("click", function() {
      //testFunc();
    })

    document.getElementById("searchResults")
      .addEventListener("keyup", function(event) {
        event.preventDefault();
        if (event.keyCode === 13) {
          lookGcseResults();
        }
      });

    //Show navbar when mouse moves toward top
    d3.select("#mainNavbar").on("mouseenter", function() {
      d3.select("#mainNavbar").transition()
        .duration(200)
        .style("opacity", 1); //.style("pointer-events", "auto");
    });
    d3.select("#mainNavbar").on("mouseleave", function() {
      d3.select("#mainNavbar").transition()
        .duration(200)
        .style("opacity", 0); //.style("pointer-events", "none");
    });

    document.getElementById("user-input").value = "";

    var pastCommands = [];
    var pastCommandIndex = -1;

    function updateDisplay() {

    }

    function executeCommand(commandString) {
      d3.select("#authorize-button").style("opacity", 0);
      d3.select("#logout-button").style("opacity", 0);
      d3.select("#email-display").style("display", "none");

      if (commandString.replace(/ /g,'').length === 0) {
        return;
      }

      var command = parseCommand(commandString);
      var task = findStellaTaskRelatedToCommand(commandString);

      var qualifiers = getQualifiersFromTask(task);
      var newParsed = parseNounVerbPredicate(commandString, qualifiers);

      task.execute(command, newParsed);

      console.log(command);
      console.log(newParsed);
    }

    readWordNet("./dict/data.adj");
    readWordNet("./dict/data.verb");
    readWordNet("./dict/data.noun");
    readWordNet("./dict/data.adv");
    //readDefinitions("./definitions.txt");
    readPrepositions("./dict/prepositions.txt");
    readConjunctions("./dict/conjunctions.txt");
    readLexemeExceptions("./dict/noun.exc");
    readLexemeExceptions("./dict/verb.exc");
    readLexemeExceptions("./dict/adj.exc");

    //var command = parseCommand("search Google for some traitor");
    //console.log(command);

    findAssociatedWords("define");

    //var command = parseCommand("search Google for UC Berkeley");
    //var task = findStellaTaskRelatedToCommand("search Google for UC Berkeley");
    //task.execute(command);

    //findStellaTaskRelatedToCommand("research");
    //findStellaTaskRelatedToCommand("research Google");

    document.getElementById("user-input")
      .addEventListener("keyup", function(event) {
        event.preventDefault();
        if (event.keyCode === 13) {
          var currentText = document.getElementById("user-input").value;
          executeCommand(currentText);
          pastCommands.push(currentText);
          pastCommandIndex = pastCommands.length;
          document.getElementById("user-input").value = "";
        }
        else if (event.keyCode === 38) { //up arrow
          if (pastCommandIndex - 1 >= 0 && pastCommandIndex - 1 <= pastCommands.length) {
            pastCommandIndex--;
            if (pastCommandIndex === pastCommands.length) {
              document.getElementById("user-input").value = "";
            }
            else {
              document.getElementById("user-input").value = pastCommands[pastCommandIndex];
            }
          }
        }
        else if (event.keyCode === 40) { //down arrow
          if (pastCommandIndex + 1 >= 0 && pastCommandIndex + 1 <= pastCommands.length) {
            pastCommandIndex++;
            if (pastCommandIndex === pastCommands.length) {
              document.getElementById("user-input").value = "";
            }
            else {
              document.getElementById("user-input").value = pastCommands[pastCommandIndex];
            }
          }
        }
      });

    /*
    function initMap() {
      var uluru = {lat: -25.363, lng: 131.044};
      var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 4,
        center: uluru
      });
      var marker = new google.maps.Marker({
        position: uluru,
        map: map
      });
      //console.log("initialized map");
    }
    */

    window.fbAsyncInit = function() {
      FB.init({
        appId      : '1454216364589758',
        cookie     : true,  // enable cookies to allow the server to access
                            // the session
        xfbml      : true,  // parse social plugins on this page
        version    : 'v2.8' // use graph api version 2.8
      });
      //FB.AppEvents.logPageView();
    };

    function init(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) {return;}
      js = d.createElement(s); js.id = id;
      js.src = "https://connect.facebook.net/en_US/sdk.js";
      fjs.parentNode.insertBefore(js, fjs);
    }
    init(document, 'script', 'facebook-jssdk');

    </script>

    <script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>
    <script src="./wikipedia.js"></script>

    <script>

var tempText = "Hurricane Gilbert swept toward the Dominican Republic Sunday, and the Civil De−\
fense alerted its heavily populated south coast to prepare for high winds, heavy rains\
and high seas. The National Hurricane Center in Miami reported its position at 2 am \
Sunday at latitude 16.1 north, longitude 67.5 west, about 140 miles south of Ponce, \
Puerto Rico, and 200 miles southeast of Santo Domingo. The National Weather Service \
in San Juan, Puerto Rico, said Gilbert was moving westward at 15 mph with a 'broad \
area of cloudiness and heavy weather' rotating around the center of the storm. Strong\
winds associated with Gilbert brought coastal flooding, strong southeast winds and up\
to 12 feet to Puerto Rico’s south coast \
Tropical storm Gilbert in the eastern Carribean strenghtened into a hurricane Saturday \
night. The National Hurricane Center in Miami reported its position at 2 am Sunday to \
be about 140 miles south of Puerto Rico and 200 miles southeast of Santo Domingo. It \
is moving westward at 15 mph with a broad area of cloudiness and heavy weather with \
sustained winds of 75 mph gusting to 92 mph. The Dominican Republic’s Civil Defense \
in San Juan, Puerto Rico issued a flood watch for Puerto Rico and the Virgin Islands until \
at least 6 p.m. Sunday \
Hurricane Gilbert is moving toward the Dominican Republic, where the residents of \
the south coast, especially the Barahona Province, have been alerted to prepare for \
200 miles southeast of Santo Domingo and moving westward at 15 mph with winds \
of 75 mph. Flooding is expected in Puerto Rico and in the Virgin Islands. The second \
hurricane of the season, Florence, is now over the southern United States and down− \
graded to a tropical storm";

//tempText = "Glip. Glop. Glip glip. Glippy. Durrr. Nonsense. Glipping. Gliping.";

    summarizeText(tempText, summarizeInNumSentences=8, iterations=10);

    getWikipediaContentForSubjects(["Water"], function(pageContent) {
      var wordMap = findWordMap(pageContent);
      var energy = getEnergy(wordMap, pageContent);
      var topSentences = getTopSentencesFromText(wordMap, pageContent);
      removeAllTokens(pageContent);
    });

    </script>

    <script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyClTWJV_mKBgGjO4MZ4t2kxnilvNHSjHes&libraries=places&callback=initMap">
    </script>

    <!--
    <footer>
      <p>Princeton University "About WordNet." WordNet. Princeton University. 2010. &lt;<a href=http://wordnet.princeton.edu></a>&gt;</p>
    </footer>
    -->

    <script>

    </script>

  </body>
</html>
